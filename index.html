<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AIç¯€ç´„è¨ºæ–­æ©Ÿ | å›ºå®šè²»ã‚’å…¥åŠ›ã—ã¦ç¯€ç´„ãƒã‚¤ãƒ³ãƒˆã‚’åˆ†æ</title>
<meta name="description" content="æ¯æœˆã®å›ºå®šè²»ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€AIãŒç¯€ç´„ãƒã‚¤ãƒ³ãƒˆã‚’è‡ªå‹•è¨ºæ–­ã€‚å®¶è³ƒãƒ»ã‚¹ãƒãƒ›ä»£ãƒ»ã‚µãƒ–ã‚¹ã‚¯ãªã©10é …ç›®ã‚’åˆ†æã—ã€å¹´é–“ç¯€ç´„å¯èƒ½é¡ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3850630117368935" crossorigin="anonymous"></script>
<style>
  :root{
    --primary:#F97316; --primary-light:#FFF7ED;
    --accent:#10B981; --danger:#EF4444; --warn:#F59E0B;
    --ok:#22C55E;
    --text:#1E293B; --text-sub:#64748B; --border:#E2E8F0;
    --bg:#F8FAFC; --card:#FFFFFF;
    --shadow:0 1px 3px rgba(0,0,0,.08),0 4px 16px rgba(0,0,0,.04);
  }
  *{box-sizing:border-box;margin:0;padding:0;}
  body{font-family:'Noto Sans JP',sans-serif;background:var(--bg);color:var(--text);font-size:15px;}

  header{background:linear-gradient(135deg,#C2410C 0%,#EA580C 60%,#FB923C 100%);color:white;padding:28px 20px 24px;text-align:center;}
  header h1{font-size:1.4rem;font-weight:700;margin-bottom:6px;}
  header p{font-size:.82rem;opacity:.88;}
  .badge-row{display:flex;justify-content:center;gap:8px;flex-wrap:wrap;margin-top:12px;}
  .badge{background:rgba(255,255,255,.18);border-radius:20px;padding:3px 10px;font-size:.72rem;font-weight:600;}

  .container{max-width:540px;margin:0 auto;padding:16px;}
  .card{background:var(--card);border-radius:16px;box-shadow:var(--shadow);padding:20px;margin-bottom:16px;}
  .card-title{font-size:.8rem;font-weight:700;letter-spacing:.06em;color:var(--text-sub);text-transform:uppercase;margin-bottom:16px;}

  /* Input rows */
  .input-row{display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px solid #F1F5F9;}
  .input-row:last-child{border-bottom:none;}
  .input-icon{font-size:1.3rem;width:28px;flex-shrink:0;text-align:center;}
  .input-label{flex:1;font-size:.85rem;font-weight:600;}
  .input-label small{display:block;font-size:.7rem;font-weight:400;color:var(--text-sub);}
  .input-val{display:flex;align-items:center;gap:4px;}
  .input-val input[type=number]{
    width:90px;padding:6px 8px;border:1.5px solid var(--border);
    border-radius:8px;font-family:inherit;font-size:.88rem;text-align:right;
    color:var(--text);
  }
  .input-val input[type=number]:focus{outline:none;border-color:var(--primary);}
  .input-val span{font-size:.78rem;color:var(--text-sub);}

  /* Analyze button */
  .analyze-btn{
    width:100%;padding:16px;border:none;border-radius:14px;
    background:linear-gradient(135deg,#C2410C,#EA580C);color:white;
    font-family:inherit;font-size:1rem;font-weight:700;cursor:pointer;
    box-shadow:0 4px 14px rgba(234,88,12,.35);transition:all .2s;
    display:flex;align-items:center;justify-content:center;gap:8px;
  }
  .analyze-btn:hover{transform:translateY(-1px);box-shadow:0 6px 20px rgba(234,88,12,.45);}
  .analyze-btn:active{transform:translateY(0);}

  /* Score ring */
  .score-hero{text-align:center;padding:8px 0 16px;}
  .score-ring-wrap{position:relative;display:inline-block;margin:12px 0;}
  .score-ring-wrap svg{transform:rotate(-90deg);}
  .score-center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;}
  .score-num{font-size:2.4rem;font-weight:700;}
  .score-max{font-size:.8rem;color:var(--text-sub);}
  .score-grade{font-size:1.4rem;font-weight:700;margin-top:4px;}
  .score-msg{font-size:.9rem;color:var(--text-sub);margin-top:8px;}

  /* Category cards */
  .cat-item{padding:12px 0;border-bottom:1px solid #F1F5F9;}
  .cat-item:last-child{border-bottom:none;}
  .cat-header{display:flex;align-items:center;gap:8px;margin-bottom:6px;}
  .cat-icon{font-size:1.1rem;}
  .cat-name{flex:1;font-size:.88rem;font-weight:600;}
  .cat-grade{font-size:.75rem;font-weight:700;padding:2px 8px;border-radius:20px;}
  .grade-A{background:#DCFCE7;color:#15803D;}
  .grade-B{background:#FEF9C3;color:#A16207;}
  .grade-C{background:#FEF3C7;color:#B45309;}
  .grade-D{background:#FEE2E2;color:#B91C1C;}
  .cat-bar-wrap{height:6px;background:#F1F5F9;border-radius:99px;margin:6px 0 4px;overflow:hidden;}
  .cat-bar{height:100%;border-radius:99px;transition:width .5s;}
  .bar-ok{background:var(--ok);}
  .bar-warn{background:var(--warn);}
  .bar-over{background:var(--danger);}
  .cat-amounts{display:flex;justify-content:space-between;font-size:.72rem;color:var(--text-sub);}
  .cat-tip{font-size:.78rem;color:var(--text-sub);margin-top:4px;padding:6px 10px;background:#F8FAFC;border-radius:8px;border-left:2px solid var(--warn);line-height:1.5;}
  .cat-tip.tip-ok{border-color:var(--accent);background:#F0FDF4;color:#14532D;}
  .cat-tip.tip-danger{border-color:var(--danger);background:#FEF2F2;color:#7F1D1D;}

  /* Savings summary */
  .saving-hero{background:linear-gradient(135deg,#065F46,#059669);color:white;border-radius:14px;padding:18px 20px;text-align:center;margin-bottom:12px;}
  .saving-label{font-size:.8rem;opacity:.85;margin-bottom:4px;}
  .saving-amount{font-size:2rem;font-weight:700;}
  .saving-sub{font-size:.78rem;opacity:.8;margin-top:4px;}

  /* Top tips */
  .tip-row{display:flex;gap:10px;align-items:flex-start;padding:10px 0;border-bottom:1px solid #F1F5F9;}
  .tip-row:last-child{border-bottom:none;}
  .tip-num{flex-shrink:0;width:24px;height:24px;background:linear-gradient(135deg,#C2410C,#EA580C);color:white;border-radius:50%;font-size:.75rem;font-weight:700;display:flex;align-items:center;justify-content:center;}
  .tip-text{font-size:.82rem;line-height:1.6;}
  .tip-save{font-size:.75rem;font-weight:700;color:var(--accent);margin-top:2px;}

  /* Cross links */
  .cross-link{display:flex;align-items:center;justify-content:space-between;border-radius:12px;padding:14px 16px;text-decoration:none;margin-bottom:10px;border:1.5px solid;transition:background .15s;}
  .cl-blue{background:#EFF6FF;color:#1D4ED8;border-color:#BFDBFE;}
  .cl-blue:hover{background:#DBEAFE;}
  .cl-green{background:#F0FDF4;color:#15803D;border-color:#BBF7D0;}
  .cl-green:hover{background:#DCFCE7;}
  .cl-purple{background:#F5F3FF;color:#6D28D9;border-color:#DDD6FE;}
  .cl-purple:hover{background:#EDE9FE;}
  .cl-sub{font-size:.72rem;margin-top:2px;opacity:.75;}

  /* ref */
  .ref-list{display:flex;flex-direction:column;gap:8px;}
  .ref-item{background:#F8FAFC;border-radius:10px;border:1px solid var(--border);overflow:hidden;}
  .ref-item summary{display:flex;align-items:center;gap:8px;padding:12px 14px;cursor:pointer;list-style:none;font-size:.85rem;font-weight:600;}
  .ref-item summary::-webkit-details-marker{display:none;}
  .ref-item summary:hover{background:#F1F5F9;}
  .ref-item[open] summary{background:var(--primary-light);border-bottom:1px solid var(--border);}
  .ref-icon2{font-size:1rem;flex-shrink:0;}
  .ref-name{flex:1;}
  .ref-arrow{font-size:.75rem;color:var(--text-sub);transition:transform .2s;}
  .ref-item[open] .ref-arrow{transform:rotate(90deg);}
  .ref-body{padding:12px 14px;font-size:.8rem;line-height:1.7;color:var(--text-sub);}
  .ref-link{color:var(--primary);text-decoration:none;}
  .ref-link:hover{text-decoration:underline;}

  .ad-wrap{min-height:90px;margin-bottom:16px;border-radius:10px;overflow:hidden;}
  .ad-wrap ins:empty{display:block;min-height:90px;background:#f1f5f9;}

  footer{text-align:center;padding:20px;font-size:.75rem;color:var(--text-sub);}
  footer a{color:var(--text-sub);text-decoration:none;margin:0 8px;}

  #result-section{display:none;}
</style>
</head>
<body>

<header>
  <h1>ğŸ¤– AIç¯€ç´„è¨ºæ–­æ©Ÿ</h1>
  <p>å›ºå®šè²»ã‚’å…¥åŠ›ã—ã¦ã€ã‚ãªãŸã®ç¯€ç´„ãƒã‚¤ãƒ³ãƒˆã‚’AIãŒåˆ†æ</p>
  <div class="badge-row">
    <span class="badge">10é …ç›®åˆ†æ</span>
    <span class="badge">ç¯€ç´„ã‚¹ã‚³ã‚¢ç®—å‡º</span>
    <span class="badge">å¹´é–“ç¯€ç´„é¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</span>
  </div>
</header>

<div class="container">

  <!-- AdSense top -->
  <div class="ad-wrap">
    <ins class="adsbygoogle" style="display:block"
         data-ad-client="ca-pub-3850630117368935" data-ad-slot="XXXXXXXXXX"
         data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <!-- Input card -->
  <div class="card">
    <div class="card-title">ğŸ’° æ¯æœˆã®æ”¯å‡ºã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>

    <div class="input-row">
      <span class="input-icon">ğŸ’´</span>
      <div class="input-label">æ‰‹å–ã‚Šæœˆå<small>è¨ºæ–­ã®åŸºæº–å€¤ã¨ã—ã¦ä½¿ç”¨</small></div>
      <div class="input-val">
        <input type="number" id="in-take" value="220000" min="80000" max="800000" step="10000" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ </span>
      <div class="input-label">å®¶è³ƒãƒ»ä½å±…è²»<small>ç®¡ç†è²»ãƒ»é§è»Šå ´å«ã‚€</small></div>
      <div class="input-val">
        <input type="number" id="in-rent" value="70000" min="0" max="300000" step="1000" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ›’</span>
      <div class="input-label">é£Ÿè²»ï¼ˆè‡ªç‚Šãƒ»ã‚¹ãƒ¼ãƒ‘ãƒ¼ï¼‰<small>å¤–é£Ÿã¯åˆ¥é …ç›®</small></div>
      <div class="input-val">
        <input type="number" id="in-food" value="30000" min="0" max="100000" step="1000" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ½ï¸</span>
      <div class="input-label">å¤–é£Ÿè²»<small>ãƒ©ãƒ³ãƒãƒ»é£²ã¿ä¼šå«ã‚€</small></div>
      <div class="input-val">
        <input type="number" id="in-dining" value="20000" min="0" max="100000" step="1000" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ“±</span>
      <div class="input-label">ã‚¹ãƒãƒ›ãƒ»é€šä¿¡è²»<small>ã‚¹ãƒãƒ›+WiFiåˆè¨ˆ</small></div>
      <div class="input-val">
        <input type="number" id="in-phone" value="8000" min="0" max="30000" step="500" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ¬</span>
      <div class="input-label">ã‚µãƒ–ã‚¹ã‚¯åˆè¨ˆ<small>Netflixãƒ»Spotifyç­‰ã™ã¹ã¦</small></div>
      <div class="input-val">
        <input type="number" id="in-sub" value="5000" min="0" max="30000" step="500" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ’¡</span>
      <div class="input-label">é›»æ°—ãƒ»ã‚¬ã‚¹ãƒ»æ°´é“<small>å…‰ç†±è²»åˆè¨ˆ</small></div>
      <div class="input-val">
        <input type="number" id="in-util" value="12000" min="0" max="50000" step="500" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸšƒ</span>
      <div class="input-label">äº¤é€šè²»<small>å®šæœŸãƒ»ã‚¬ã‚½ãƒªãƒ³å«ã‚€</small></div>
      <div class="input-val">
        <input type="number" id="in-trans" value="10000" min="0" max="50000" step="1000" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ›¡ï¸</span>
      <div class="input-label">ä¿é™ºæ–™<small>ç”Ÿå‘½ãƒ»åŒ»ç™‚ãƒ»ãŒã‚“ä¿é™ºç­‰</small></div>
      <div class="input-val">
        <input type="number" id="in-ins" value="10000" min="0" max="80000" step="1000" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <div class="input-row">
      <span class="input-icon">ğŸ‘”</span>
      <div class="input-label">è¢«æœãƒ»ç¾å®¹ãƒ»é›‘è²»<small>è¡£é¡ãƒ»ç¾å®¹é™¢ãƒ»æ—¥ç”¨å“ç­‰</small></div>
      <div class="input-val">
        <input type="number" id="in-misc" value="10000" min="0" max="80000" step="1000" oninput="updatePreview()">
        <span>å††</span>
      </div>
    </div>

    <p style="font-size:.75rem;color:var(--text-sub);margin:12px 0 16px;text-align:center;">åˆè¨ˆæ”¯å‡º: <strong id="total-preview" style="color:var(--primary);">â€”</strong> / æ‰‹å–ã‚Š: <strong id="take-preview" style="color:var(--text);">â€”</strong></p>

    <button class="analyze-btn" onclick="analyze()">
      ğŸ¤– AIã§ç¯€ç´„è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ
    </button>
  </div>

  <!-- Result section (hidden until analyzed) -->
  <div id="result-section">

    <!-- Score -->
    <div class="card">
      <div class="card-title">ğŸ† ã‚ãªãŸã®ç¯€ç´„ã‚¹ã‚³ã‚¢</div>
      <div class="score-hero">
        <div class="score-ring-wrap">
          <svg width="160" height="160" viewBox="0 0 160 160">
            <circle cx="80" cy="80" r="68" fill="none" stroke="#F1F5F9" stroke-width="12"/>
            <circle id="score-circle" cx="80" cy="80" r="68" fill="none" stroke="#F97316" stroke-width="12"
                    stroke-dasharray="427" stroke-dashoffset="427" stroke-linecap="round"
                    style="transition:stroke-dashoffset .8s ease;"/>
          </svg>
          <div class="score-center">
            <div class="score-num" id="score-num">â€”</div>
            <div class="score-max">/ 100</div>
          </div>
        </div>
        <div class="score-grade" id="score-grade"></div>
        <div class="score-msg"  id="score-msg"></div>
      </div>
    </div>

    <!-- AdSense mid -->
    <div class="ad-wrap">
      <ins class="adsbygoogle" style="display:block"
           data-ad-client="ca-pub-3850630117368935" data-ad-slot="XXXXXXXXXX"
           data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <!-- Category analysis -->
    <div class="card">
      <div class="card-title">ğŸ“Š ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è¨ºæ–­</div>
      <div id="cat-list"></div>
    </div>

    <!-- Savings summary -->
    <div class="saving-hero">
      <div class="saving-label">å¹´é–“ç¯€ç´„å¯èƒ½é¡ï¼ˆç›®å®‰ï¼‰</div>
      <div class="saving-amount" id="saving-annual">â€”</div>
      <div class="saving-sub" id="saving-sub">æœˆ â€” å††ã®ç¯€ç´„ä½™åœ°ãŒã‚ã‚Šã¾ã™</div>
    </div>

    <!-- Top tips -->
    <div class="card">
      <div class="card-title">ğŸ’¡ ç¯€ç´„ãƒã‚¤ãƒ³ãƒˆ TOP3</div>
      <div id="top-tips"></div>
    </div>

    <!-- Cross links -->
    <a class="cross-link cl-blue" href="https://tetori-calc.com" target="_blank" rel="noopener">
      <div>
        <div style="font-size:.88rem;font-weight:600;">ğŸ’´ æ‰‹å–ã‚Šè¨ˆç®—æ©Ÿ</div>
        <div class="cl-sub">çµ¦ä¸ã‹ã‚‰å®Ÿéš›ã®æ‰‹å–ã‚Šã‚’è¨ˆç®—</div>
      </div><span>â†—</span>
    </a>
    <a class="cross-link cl-green" href="https://yachin-keisan.com" target="_blank" rel="noopener">
      <div>
        <div style="font-size:.88rem;font-weight:600;">ğŸ  å®¶è³ƒè¨ˆç®—æ©Ÿ</div>
        <div class="cl-sub">æ‰‹å–ã‚Šã‹ã‚‰é©æ­£å®¶è³ƒãƒ»åˆæœŸè²»ç”¨ã‚’è¨ˆç®—</div>
      </div><span>â†—</span>
    </a>
    <a class="cross-link cl-purple" href="https://nenkin-sim.pages.dev" target="_blank" rel="noopener">
      <div>
        <div style="font-size:.88rem;font-weight:600;">ğŸ¦ å¹´é‡‘ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</div>
        <div class="cl-sub">è€é½¢å¹´é‡‘ã®å—çµ¦é¡ã‚’è¨ˆç®—</div>
      </div><span>â†—</span>
    </a>

    <!-- AdSense bottom -->
    <div class="ad-wrap">
      <ins class="adsbygoogle" style="display:block"
           data-ad-client="ca-pub-3850630117368935" data-ad-slot="XXXXXXXXXX"
           data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <!-- å‡ºå…¸ -->
    <div class="card">
      <div class="card-title">ğŸ“š è¨ºæ–­åŸºæº–ã®æ ¹æ‹ </div>
      <div class="ref-list">
        <details class="ref-item">
          <summary>
            <span class="ref-icon2">ğŸ“Š</span>
            <span class="ref-name">å„æ”¯å‡ºã®ç›®å®‰ï¼ˆç·å‹™çœ å®¶è¨ˆèª¿æŸ»ï¼‰</span>
            <span class="ref-arrow">â€º</span>
          </summary>
          <div class="ref-body">
            æœ¬è¨ºæ–­ã®å„ã‚«ãƒ†ã‚´ãƒªãƒ¼ç›®å®‰å€¤ã¯ã€ç·å‹™çœã€Œå®¶è¨ˆèª¿æŸ»ï¼ˆ2023å¹´ï¼‰ã€ã®å˜èº«å‹¤åŠ´è€…ä¸–å¸¯å¹³å‡ã‚’å‚è€ƒã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚åœ°åŸŸãƒ»å¹´é½¢ãƒ»å®¶æ—æ§‹æˆã«ã‚ˆã‚Šå¤§ããç•°ãªã‚Šã¾ã™ã€‚<br>
            <a href="https://www.stat.go.jp/data/kakei/" class="ref-link" target="_blank" rel="noopener">ç·å‹™çœ å®¶è¨ˆèª¿æŸ» â†—</a>
          </div>
        </details>
        <details class="ref-item">
          <summary>
            <span class="ref-icon2">ğŸ“±</span>
            <span class="ref-name">é€šä¿¡è²»ã®ç¯€ç´„ï¼ˆç·å‹™çœ æ ¼å®‰SIMæ¨å¥¨ï¼‰</span>
            <span class="ref-arrow">â€º</span>
          </summary>
          <div class="ref-body">
            ç·å‹™çœã¯å®¶è¨ˆé€šä¿¡è²»ã®é©æ­£åŒ–ã¨ã—ã¦æ ¼å®‰SIMï¼ˆMVNOï¼‰ãƒ»æ ¼å®‰ãƒ–ãƒ©ãƒ³ãƒ‰ã¸ã®ä¹—ã‚Šæ›ãˆã‚’æ¨å¥¨ã€‚å¤§æ‰‹3ã‚­ãƒ£ãƒªã‚¢ã‹ã‚‰ä¹—ã‚Šæ›ãˆã‚‹ã¨æœˆ2,000ã€œ6,000å††ç¨‹åº¦ã®ç¯€ç´„ãŒå¯èƒ½ãªã‚±ãƒ¼ã‚¹ãŒå¤šã„ã§ã™ã€‚<br>
            <a href="https://www.soumu.go.jp/main_sosiki/joho_tsusin/top/mobile/mvno.html" class="ref-link" target="_blank" rel="noopener">ç·å‹™çœ æ ¼å®‰SIM â†—</a>
          </div>
        </details>
      </div>
    </div>

  </div><!-- /result-section -->

</div>

<footer>
  <a href="/privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
  <a href="https://tetori-calc.com" target="_blank">æ‰‹å–ã‚Šè¨ˆç®—æ©Ÿ</a>
  <p style="margin-top:8px;">Â© 2026 AIç¯€ç´„è¨ºæ–­æ©Ÿ | çµæœã¯ã‚ãã¾ã§å‚è€ƒå€¤ã§ã™</p>
</footer>

<script>
// â”€â”€ è¨ºæ–­åŸºæº–ãƒ†ãƒ¼ãƒ–ãƒ« â”€â”€
// benchmark: æ‰‹å–ã‚Šã«å¯¾ã™ã‚‹ç†æƒ³å‰²åˆ OR å›ºå®šé‡‘é¡ä¸Šé™
const CATS = [
  {
    id:'rent',   icon:'ğŸ ', name:'å®¶è³ƒãƒ»ä½å±…è²»',
    ideal: take => take * 0.30,
    tipOk:  'âœ… å®¶è³ƒã¯æ‰‹å–ã‚Šã®30%ä»¥å†…ã«åã¾ã£ã¦ã„ã¾ã™ã€‚ç†æƒ³çš„ã§ã™ï¼',
    tipWarn:'ğŸ’¡ æ‰‹å–ã‚Šã®30ã€œ33%è¶…ãˆã¦ã„ã¾ã™ã€‚æ›´æ–°æ™‚ã«å®¶è³ƒäº¤æ¸‰ã‹ã€ã‚ˆã‚Šå®‰ã„ç‰©ä»¶ã¸ã®å¼•è¶Šã—ã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚',
    tipDanger:'â— å®¶è³ƒãŒæ‰‹å–ã‚Šã®40%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚ç”Ÿæ´»è²»ãŒåœ§è¿«ã•ã‚Œã¦ã„ã¾ã™ã€‚å¼•è¶Šã—ã¾ãŸã¯å‰¯åå…¥ã®ç¢ºä¿ã‚’å„ªå…ˆã—ã¾ã—ã‚‡ã†ã€‚',
    saveTip: 'å®¶è³ƒã‚’1ä¸‡å††ä¸‹ã’ã‚‹ã¨å¹´12ä¸‡å††ã®ç¯€ç´„ã«ãªã‚Šã¾ã™',
    unit: 'ratio',
  },
  {
    id:'food',   icon:'ğŸ›’', name:'é£Ÿè²»ï¼ˆè‡ªç‚Šï¼‰',
    ideal: _ => 40000,
    tipOk:  'âœ… é£Ÿè²»ãŒé©åˆ‡ãªç¯„å›²ã§ã™ã€‚è‡ªç‚Šç¿’æ…£ãŒç¯€ç´„ã«è²¢çŒ®ã—ã¦ã„ã¾ã™ã€‚',
    tipWarn:'ğŸ’¡ é£Ÿè²»ãŒã‚„ã‚„é«˜ã‚ã€‚é€±1ã®ã€Œä½œã‚Šç½®ãã€ã§é£Ÿè²»ã‚’æœˆ5,000ã€œ10,000å††å‰Šæ¸›ã§ãã¾ã™ã€‚',
    tipDanger:'â— é£Ÿè²»ãŒæœˆ4ä¸‡å††è¶…ã€‚é£Ÿæã®ç„¡é§„ã‚’æ¸›ã‚‰ã—ã€æ¥­å‹™ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚„ã¾ã¨ã‚è²·ã„ã‚’æ´»ç”¨ã—ã¾ã—ã‚‡ã†ã€‚',
    saveTip: 'ä½œã‚Šç½®ãæ´»ç”¨ã§æœˆ5,000ã€œ10,000å††ã®ç¯€ç´„ãŒå¯èƒ½',
    unit: 'fixed',
  },
  {
    id:'dining', icon:'ğŸ½ï¸', name:'å¤–é£Ÿè²»',
    ideal: _ => 20000,
    tipOk:  'âœ… å¤–é£Ÿè²»ã¯é©åˆ‡ãªç¯„å›²ã§ã™ã€‚',
    tipWarn:'ğŸ’¡ å¤–é£Ÿè²»ãŒé«˜ã‚ã€‚ãƒ©ãƒ³ãƒã‚’å¼å½“ã«ã™ã‚‹ã ã‘ã§æœˆ3,000ã€œ5,000å††ã®ç¯€ç´„ã«ã€‚',
    tipDanger:'â— å¤–é£Ÿè²»ãŒæœˆ2ä¸‡å††è¶…ã€‚é€±1ã®ãƒ©ãƒ³ãƒç¯€ç´„ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚',
    saveTip: 'ãƒ©ãƒ³ãƒå¼å½“åŒ–ã§æœˆ3,000ã€œ5,000å††ç¯€ç´„å¯èƒ½',
    unit: 'fixed',
  },
  {
    id:'phone',  icon:'ğŸ“±', name:'ã‚¹ãƒãƒ›ãƒ»é€šä¿¡è²»',
    ideal: _ => 5000,
    tipOk:  'âœ… é€šä¿¡è²»ã¯ç†æƒ³çš„ãªç¯„å›²ã§ã™ã€‚æ ¼å®‰ãƒ—ãƒ©ãƒ³ã‚’æ´»ç”¨ã§ãã¦ã„ã¾ã™ã€‚',
    tipWarn:'ğŸ’¡ é€šä¿¡è²»ãŒ5,000å††è¶…ã€‚æ ¼å®‰SIMï¼ˆpovoãƒ»LINEMOãƒ»æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«ç­‰ï¼‰ã«ä¹—ã‚Šæ›ãˆã§æœˆ2,000ã€œ6,000å††ç¯€ç´„ã§ãã¾ã™ã€‚',
    tipDanger:'â— é€šä¿¡è²»ãŒé«˜é¡ã§ã™ã€‚ä»Šã™ãæ ¼å®‰SIMã¸ã®ä¹—ã‚Šæ›ãˆã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚å¹´é–“ã§æ•°ä¸‡å††ã®ç¯€ç´„ã«ãªã‚Šã¾ã™ã€‚',
    saveTip: 'æ ¼å®‰SIMä¹—ã‚Šæ›ãˆã§æœˆ3,000ã€œ6,000å††ç¯€ç´„å¯èƒ½',
    unit: 'fixed',
  },
  {
    id:'sub',    icon:'ğŸ¬', name:'ã‚µãƒ–ã‚¹ã‚¯åˆè¨ˆ',
    ideal: _ => 3000,
    tipOk:  'âœ… ã‚µãƒ–ã‚¹ã‚¯ãŒé©åˆ‡ãªç¯„å›²ã§ã™ã€‚ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã ã‘ã«çµã‚Œã¦ã„ã¾ã™ã€‚',
    tipWarn:'ğŸ’¡ ã‚µãƒ–ã‚¹ã‚¯ãŒ3,000å††è¶…ã€‚æœ¬å½“ã«ä½¿ã£ã¦ã„ã‚‹ã‹è¦‹ç›´ã—ã‚’ã€‚ä½¿ã£ã¦ã„ãªã„ã‚µãƒ¼ãƒ“ã‚¹ã¯è§£ç´„ã—ã¾ã—ã‚‡ã†ã€‚',
    tipDanger:'â— ã‚µãƒ–ã‚¹ã‚¯ãŒé«˜é¡ã§ã™ã€‚å®¶æ—ã‚„å‹äººã¨ãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒ—ãƒ©ãƒ³ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹ã¨å¤§å¹…ã«å®‰ããªã‚Šã¾ã™ã€‚',
    saveTip: 'ä½¿ã£ã¦ã„ãªã„ã‚µãƒ–ã‚¹ã‚¯ã‚’è§£ç´„ã§æœˆ1,000ã€œ3,000å††ç¯€ç´„',
    unit: 'fixed',
  },
  {
    id:'util',   icon:'ğŸ’¡', name:'å…‰ç†±è²»',
    ideal: _ => 12000,
    tipOk:  'âœ… å…‰ç†±è²»ã¯é©åˆ‡ãªç¯„å›²ã§ã™ã€‚',
    tipWarn:'ğŸ’¡ å…‰ç†±è²»ãŒã‚„ã‚„é«˜ã‚ã€‚é›»åŠ›ä¼šç¤¾ã®åˆ‡ã‚Šæ›¿ãˆã§å¹´5,000ã€œ10,000å††ç¯€ç´„ã§ãã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚',
    tipDanger:'â— å…‰ç†±è²»ãŒé«˜é¡ã§ã™ã€‚ã‚¨ã‚¢ã‚³ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¸…æƒãƒ»çœã‚¨ãƒå®¶é›»ã¸ã®è²·ã„æ›¿ãˆãƒ»é›»åŠ›ä¼šç¤¾è¦‹ç›´ã—ã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚',
    saveTip: 'é›»åŠ›ä¼šç¤¾ã®åˆ‡ã‚Šæ›¿ãˆã§å¹´5,000ã€œ10,000å††ç¯€ç´„å¯èƒ½',
    unit: 'fixed',
  },
  {
    id:'trans',  icon:'ğŸšƒ', name:'äº¤é€šè²»',
    ideal: _ => 12000,
    tipOk:  'âœ… äº¤é€šè²»ã¯é©åˆ‡ãªç¯„å›²ã§ã™ã€‚',
    tipWarn:'ğŸ’¡ äº¤é€šè²»ãŒã‚„ã‚„é«˜ã‚ã€‚è‡ªè»¢è»Šé€šå‹¤ãƒ»ãƒ†ãƒ¬ãƒ¯ãƒ¼ã‚¯æ´»ç”¨ã§å‰Šæ¸›ã§ãã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚',
    tipDanger:'â— äº¤é€šè²»ãŒé«˜é¡ã§ã™ã€‚é€šå‹¤ãƒ«ãƒ¼ãƒˆã®è¦‹ç›´ã—ã‚„åœ¨å®…å‹¤å‹™ã®å¢—åŠ ã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚',
    saveTip: 'è‡ªè»¢è»Šé€šå‹¤åŒ–ã§æœˆæ•°åƒã€œ1ä¸‡å††ç¯€ç´„ã®å¯èƒ½æ€§',
    unit: 'fixed',
  },
  {
    id:'ins',    icon:'ğŸ›¡ï¸', name:'ä¿é™ºæ–™',
    ideal: take => take * 0.08,
    tipOk:  'âœ… ä¿é™ºæ–™ã¯é©åˆ‡ãªç¯„å›²ã§ã™ã€‚',
    tipWarn:'ğŸ’¡ ä¿é™ºæ–™ãŒã‚„ã‚„é«˜ã‚ã€‚ä¿éšœå†…å®¹ã‚’è¦‹ç›´ã—ã€å…¬çš„ä¿é™ºï¼ˆå¥åº·ä¿é™ºãƒ»é›‡ç”¨ä¿é™ºï¼‰ã§ã‚«ãƒãƒ¼ã§ãã‚‹éƒ¨åˆ†ã¯æ°‘é–“ä¿é™ºã‚’æ¸›ã‚‰ã—ã¾ã—ã‚‡ã†ã€‚',
    tipDanger:'â— ä¿é™ºæ–™ãŒé«˜é¡ã§ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚·ãƒ£ãƒ«ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã¸ã®ç›¸è«‡ã‚„ä¿é™ºã®è¦‹ç›´ã—ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚',
    saveTip: 'ä¿é™ºã®è¦‹ç›´ã—ã§æœˆ2,000ã€œ1ä¸‡å††ã®ç¯€ç´„å¯èƒ½æ€§',
    unit: 'ratio',
  },
  {
    id:'misc',   icon:'ğŸ‘”', name:'è¢«æœãƒ»ç¾å®¹ãƒ»é›‘è²»',
    ideal: _ => 15000,
    tipOk:  'âœ… é›‘è²»ã¯é©åˆ‡ãªç¯„å›²ã§ã™ã€‚',
    tipWarn:'ğŸ’¡ é›‘è²»ãŒã‚„ã‚„é«˜ã‚ã€‚è¢«æœè²»ã¯å­£ç¯€ã®ã‚»ãƒ¼ãƒ«æ´»ç”¨ãƒ»ãƒ•ãƒªãƒã‚¢ãƒ—ãƒªæ´»ç”¨ã§æŠ‘ãˆã‚‰ã‚Œã¾ã™ã€‚',
    tipDanger:'â— é›‘è²»ãŒé«˜é¡ã§ã™ã€‚æœˆã”ã¨ã®æ”¯å‡ºã‚’è¨˜éŒ²ã—ã¦ã€ä½•ã«ä½¿ã£ã¦ã„ã‚‹ã‹æŠŠæ¡ã—ã¾ã—ã‚‡ã†ã€‚',
    saveTip: 'ãƒ•ãƒªãƒã‚¢ãƒ—ãƒªæ´»ç”¨ã§è¢«æœè²»ã‚’æœˆ3,000ã€œ5,000å††ç¯€ç´„',
    unit: 'fixed',
  },
];

function fmt(n){return Math.round(n).toLocaleString('ja-JP')+'å††';}
function fmtMan(n){return Math.round(n/10000).toLocaleString('ja-JP')+'ä¸‡å††';}

function updatePreview(){
  const take = +document.getElementById('in-take').value||0;
  const total = ['rent','food','dining','phone','sub','util','trans','ins','misc'].reduce((s,id)=>{
    return s + (+document.getElementById('in-'+id).value||0);
  }, 0);
  document.getElementById('total-preview').textContent = fmt(total);
  document.getElementById('take-preview').textContent  = fmt(take);
}

function analyze(){
  const take = +document.getElementById('in-take').value||220000;
  const vals = {};
  CATS.forEach(c => { vals[c.id] = +document.getElementById('in-'+c.id).value||0; });

  // Score & grade
  let totalScore = 0;
  let totalSavings = 0;
  const catResults = [];

  CATS.forEach(c => {
    const actual = vals[c.id];
    const ideal  = c.ideal(take);
    const ratio  = ideal > 0 ? actual / ideal : 1;
    let grade, catScore, barClass, tip;

    if (ratio <= 1.0)       { grade='A'; catScore=100; barClass='bar-ok';   tip=c.tipOk;    }
    else if (ratio <= 1.3)  { grade='B'; catScore=75;  barClass='bar-warn'; tip=c.tipWarn;  }
    else if (ratio <= 1.6)  { grade='C'; catScore=50;  barClass='bar-warn'; tip=c.tipWarn;  }
    else                    { grade='D'; catScore=20;  barClass='bar-over'; tip=c.tipDanger; }

    const savings = Math.max(0, actual - ideal);
    totalScore  += catScore;
    totalSavings += savings;
    catResults.push({...c, actual, ideal, ratio, grade, catScore, barClass, tip, savings});
  });

  const score = Math.round(totalScore / CATS.length);
  let gradeLabel, gradeColor, msg;
  if (score >= 85) { gradeLabel='S å„ªç§€ï¼'; gradeColor='#22C55E'; msg='ç´ æ™´ã‚‰ã—ã„ç¯€ç´„åŠ›ã§ã™ï¼ã“ã®ãƒšãƒ¼ã‚¹ã‚’ç¶­æŒã—ã¾ã—ã‚‡ã†ã€‚'; }
  else if (score >= 70) { gradeLabel='A è‰¯å¥½'; gradeColor='#10B981'; msg='å…¨ä½“çš„ã«ç¯€ç´„ã§ãã¦ã„ã¾ã™ã€‚ã‚ã¨å°‘ã—ã®å·¥å¤«ã§ã•ã‚‰ã«ã‚¢ãƒƒãƒ—ï¼'; }
  else if (score >= 55) { gradeLabel='B æ”¹å–„ä½™åœ°ã‚ã‚Š'; gradeColor='#F59E0B'; msg='ã„ãã¤ã‹ã®é …ç›®ã‚’è¦‹ç›´ã™ã¨å¤§ããç¯€ç´„ã§ãã¾ã™ã€‚'; }
  else if (score >= 40) { gradeLabel='C è¦æ³¨æ„'; gradeColor='#EF4444'; msg='æ”¯å‡ºãŒå¤šã„é …ç›®ãŒã‚ã‚Šã¾ã™ã€‚å„ªå…ˆçš„ã«è¦‹ç›´ã—ã¾ã—ã‚‡ã†ã€‚'; }
  else { gradeLabel='D ç·Šæ€¥è¦‹ç›´ã—'; gradeColor='#B91C1C'; msg='å®¶è¨ˆã®è¦‹ç›´ã—ãŒæ€¥å‹™ã§ã™ã€‚ã¾ãšå›ºå®šè²»ã‹ã‚‰å‰Šæ¸›ã—ã¾ã—ã‚‡ã†ã€‚'; }

  // Render score ring
  const circumference = 2 * Math.PI * 68;
  const offset = circumference * (1 - score / 100);
  document.getElementById('score-circle').style.strokeDashoffset = offset;
  document.getElementById('score-circle').style.stroke = gradeColor;
  document.getElementById('score-num').textContent  = score;
  document.getElementById('score-num').style.color  = gradeColor;
  document.getElementById('score-grade').textContent = gradeLabel;
  document.getElementById('score-grade').style.color = gradeColor;
  document.getElementById('score-msg').textContent   = msg;

  // Category list
  const catList = document.getElementById('cat-list');
  catList.innerHTML = '';
  catResults.forEach(r => {
    const barPct = Math.min(100, Math.round(r.ratio * 100 * 0.6));
    const tipCls = r.grade === 'A' ? 'tip-ok' : r.grade === 'D' ? 'tip-danger' : '';
    catList.innerHTML += `
      <div class="cat-item">
        <div class="cat-header">
          <span class="cat-icon">${r.icon}</span>
          <span class="cat-name">${r.name}</span>
          <span class="cat-grade grade-${r.grade}">${r.grade}è©•ä¾¡</span>
        </div>
        <div class="cat-bar-wrap"><div class="cat-bar ${r.barClass}" style="width:${barPct}%"></div></div>
        <div class="cat-amounts">
          <span>å®Ÿéš›: <strong>${fmt(r.actual)}</strong></span>
          <span>ç›®å®‰: ${fmt(r.ideal)}</span>
        </div>
        <div class="cat-tip ${tipCls}">${r.tip}</div>
      </div>`;
  });

  // Savings
  const monthlySavings = Math.round(totalSavings);
  const annualSavings  = monthlySavings * 12;
  document.getElementById('saving-annual').textContent = fmtMan(annualSavings);
  document.getElementById('saving-sub').textContent    = `æœˆ ${fmt(monthlySavings)} ã®ç¯€ç´„ä½™åœ°ãŒã‚ã‚Šã¾ã™`;

  // Top 3 tips
  const sorted = [...catResults].filter(r => r.grade !== 'A').sort((a,b) => b.savings - a.savings);
  const topTips = document.getElementById('top-tips');
  topTips.innerHTML = '';
  sorted.slice(0,3).forEach((r,i) => {
    topTips.innerHTML += `
      <div class="tip-row">
        <div class="tip-num">${i+1}</div>
        <div>
          <div class="tip-text">${r.icon} <strong>${r.name}</strong> â€” ${r.saveTip}</div>
          <div class="tip-save">æœˆ ${fmt(r.savings)} ã®ç¯€ç´„ä½™åœ°</div>
        </div>
      </div>`;
  });
  if (sorted.length === 0) {
    topTips.innerHTML = '<p style="font-size:.85rem;color:var(--accent);text-align:center;padding:12px 0;">ğŸ‰ å…¨é …ç›®ã§å„ªç§€ãªç¯€ç´„ãŒã§ãã¦ã„ã¾ã™ï¼</p>';
  }

  // Show results
  document.getElementById('result-section').style.display = '';
  setTimeout(() => document.getElementById('result-section').scrollIntoView({behavior:'smooth'}), 100);
}

// Init preview
updatePreview();
</script>
</body>
</html>
